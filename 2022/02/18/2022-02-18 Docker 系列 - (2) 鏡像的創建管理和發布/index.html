<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 7.0.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"kitefree.github.io","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="1. 鏡像的獲取方式 pull from registry (online ) 從registry拉取  public(公有)  private(私有)  自架類似dokcer hub 的伺服器     build from Dockerfile (online) 從dockerfile構建  構建的過程需要上網，拉取基礎的images也可是自架的docker hub 伺服器   load fro">
<meta property="og:type" content="article">
<meta property="og:title" content="docker 系列 - (2) 鏡像的創建管理和發布">
<meta property="og:url" content="https://kitefree.github.io/2022/02/18/2022-02-18%20Docker%20%E7%B3%BB%E5%88%97%20-%20(2)%20%E9%8F%A1%E5%83%8F%E7%9A%84%E5%89%B5%E5%BB%BA%E7%AE%A1%E7%90%86%E5%92%8C%E7%99%BC%E5%B8%83/index.html">
<meta property="og:site_name" content="Kite的筆記">
<meta property="og:description" content="1. 鏡像的獲取方式 pull from registry (online ) 從registry拉取  public(公有)  private(私有)  自架類似dokcer hub 的伺服器     build from Dockerfile (online) 從dockerfile構建  構建的過程需要上網，拉取基礎的images也可是自架的docker hub 伺服器   load fro">
<meta property="og:locale" content="zh_TW">
<meta property="og:image" content="https://i.imgur.com/35wWMep.png">
<meta property="og:image" content="https://i.imgur.com/TR3XrgC.png">
<meta property="og:image" content="https://i.imgur.com/rV2MPWp.png">
<meta property="og:image" content="https://i.imgur.com/U7yXbV0.png">
<meta property="og:image" content="https://i.imgur.com/5a0sZqq.png">
<meta property="og:image" content="https://i.imgur.com/AuJjhzo.png">
<meta property="article:published_time" content="2022-02-18T05:47:00.000Z">
<meta property="article:modified_time" content="2023-12-31T14:26:53.276Z">
<meta property="article:author" content="kite">
<meta property="article:tag" content="docker">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://i.imgur.com/35wWMep.png">

<link rel="canonical" href="https://kitefree.github.io/2022/02/18/2022-02-18%20Docker%20%E7%B3%BB%E5%88%97%20-%20(2)%20%E9%8F%A1%E5%83%8F%E7%9A%84%E5%89%B5%E5%BB%BA%E7%AE%A1%E7%90%86%E5%92%8C%E7%99%BC%E5%B8%83/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-TW'
  };
</script>

  <title>docker 系列 - (2) 鏡像的創建管理和發布 | Kite的筆記</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切換導航欄">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Kite的筆記</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="home fa-fw"></i>首頁</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="tags fa-fw"></i>標籤</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="th fa-fw"></i>分類</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="archive fa-fw"></i>歸檔</a>

  </li>
        <li class="menu-item menu-item-sitemap">

    <a href="/sitemap.xml" rel="section"><i class="sitemap fa-fw"></i>網站地圖</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜尋
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜尋..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-TW">
    <link itemprop="mainEntityOfPage" href="https://kitefree.github.io/2022/02/18/2022-02-18%20Docker%20%E7%B3%BB%E5%88%97%20-%20(2)%20%E9%8F%A1%E5%83%8F%E7%9A%84%E5%89%B5%E5%BB%BA%E7%AE%A1%E7%90%86%E5%92%8C%E7%99%BC%E5%B8%83/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="kite">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Kite的筆記">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          docker 系列 - (2) 鏡像的創建管理和發布
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">發表於</span>

              <time title="創建時間：2022-02-18 13:47:00" itemprop="dateCreated datePublished" datetime="2022-02-18T13:47:00+08:00">2022-02-18</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新於</span>
                <time title="修改時間：2023-12-31 22:26:53" itemprop="dateModified" datetime="2023-12-31T22:26:53+08:00">2023-12-31</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分類於</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/docker/" itemprop="url" rel="index"><span itemprop="name">docker</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="文章字數">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
              <span>19k</span>
            </span>
            <span class="post-meta-item" title="所需閱讀時間">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
              <span>34 分鐘</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h2 id="1-鏡像的獲取方式"><a href="#1-鏡像的獲取方式" class="headerlink" title="1. 鏡像的獲取方式"></a>1. 鏡像的獲取方式</h2><ol>
<li><p>pull from <code>registry</code> (online ) 從registry拉取</p>
<ul>
<li><p>public(公有)</p>
</li>
<li><p>private(私有)</p>
<ul>
<li>自架類似dokcer hub 的伺服器</li>
</ul>
</li>
</ul>
</li>
<li><p>build from <code>Dockerfile</code> (online) 從dockerfile構建</p>
<ul>
<li>構建的過程需要上網，拉取基礎的images也可是自架的docker hub 伺服器</li>
</ul>
</li>
<li><p>load from <code>file</code>(offline)文件導入(離線)</p>
<ul>
<li>透過鏡像的<code>save</code>指令導出一個鏡像檔，可以通過usb等硬體裝置儲存攜帶，再插到另一台機器讀取，接著再利用<code>load</code>指令導入到docker裡。</li>
</ul>
</li>
</ol>
<p><img src="https://i.imgur.com/35wWMep.png" alt="docker-image"></p>
<span id="more"></span>


<h2 id="2-鏡像的registry介紹"><a href="#2-鏡像的registry介紹" class="headerlink" title="2. 鏡像的registry介紹"></a>2. 鏡像的registry介紹</h2><p>registry網站</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://hub.docker.com/">docker hub</a></li>
<li><a target="_blank" rel="noopener" href="https://quay.io/">Quay.io</a></li>
</ul>
<h2 id="3-鏡像的獲取和查看"><a href="#3-鏡像的獲取和查看" class="headerlink" title="3. 鏡像的獲取和查看"></a>3. 鏡像的獲取和查看</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">拉取鏡像寫法</span></span><br><span class="line">docker image pull nginx </span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">較舊寫法 不需要寫image</span></span><br><span class="line">docker pull nginx </span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">查看本地的image 清單 以下兩個語法都可以</span></span><br><span class="line">docker image ls</span><br><span class="line">docker images</span><br></pre></td></tr></table></figure>

<p>在nginx 後面如果沒有加上tag名稱時，會預設抓<code>latest</code>的tag進行拉取。</p>
<p>舉例來說，我們可以先從docker hub 找到你要的版本，以1.20.2為例：</p>
<p><img src="https://i.imgur.com/TR3XrgC.png" alt="image-20220216095102803"></p>
<p>接著我們在輸入指令</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">root@kite-virtual-machine:/home/kite/Desktop# docker pull nginx:1.20.2</span><br><span class="line">1.20.2: Pulling from library/nginx</span><br><span class="line">5eb5b503b376: Pull complete </span><br><span class="line">cdfeb356c029: Pull complete </span><br><span class="line">d86da7454448: Pull complete </span><br><span class="line">7976249980ef: Pull complete </span><br><span class="line">8f66aa6726b2: Pull complete </span><br><span class="line">c004cabebe76: Pull complete </span><br><span class="line">Digest: sha256:02923d65cde08a49380ab3f3dd2f8f90aa51fa2bd358bd85f89345848f6e6623</span><br><span class="line">Status: Downloaded newer image for nginx:1.20.2</span><br><span class="line">docker.io/library/nginx:1.20.2</span><br><span class="line"></span><br><span class="line">root@kite-virtual-machine:/home/kite/Desktop# docker images</span><br><span class="line">REPOSITORY             TAG       IMAGE ID       CREATED       SIZE</span><br><span class="line">nginx                  1.20.2    d6c9558ba445   2 weeks ago   141MB</span><br></pre></td></tr></table></figure>

<p>下<code>docker images</code>就會看到拉取了1.20.2 的鏡像。</p>
<p>我們用另一個示例來玩看看，首先，先到<code>quay</code>網站來查詢nginx，我們copy 指令<code>docker pull quay.io/bitnami/nginx</code>。針對這個指令的說明一下：</p>
<ul>
<li>第一個<code>quay.io</code>指的是registry 的網址</li>
<li>第二個<code>bitnami</code>是發行的組(group)或是擁有者(owner)，比如是一個用戶的id</li>
<li>第三個<code>nginx</code>是鏡像名稱</li>
</ul>
<p><img src="https://i.imgur.com/rV2MPWp.png" alt="image-20220216143013797"></p>
<p>執行完結果如下：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">root@kite-virtual-machine:/home/kite/Desktop# docker pull quay.io/bitnami/nginx</span><br><span class="line">Using default tag: latest</span><br><span class="line">latest: Pulling from bitnami/nginx</span><br><span class="line">a2b89359fa38: Pull complete </span><br><span class="line">eb3d3b400740: Pull complete </span><br><span class="line">46e8977b34c6: Pull complete </span><br><span class="line">ba19e4f3bb28: Pull complete </span><br><span class="line">b32f6ece772b: Pull complete </span><br><span class="line">93564c931307: Pull complete </span><br><span class="line">e5b3ce1bf203: Pull complete </span><br><span class="line">724a66987928: Pull complete </span><br><span class="line">e556e9ce9174: Pull complete </span><br><span class="line">61c0aa354bde: Pull complete </span><br><span class="line">c14227a7baae: Pull complete </span><br><span class="line">055df77435e3: Pull complete </span><br><span class="line">Digest: sha256:f9b149213fa98cee7750ede87bbec1109971c7a2cfa556c89b7d2cbf3697b213</span><br><span class="line">Status: Downloaded newer image for quay.io/bitnami/nginx:latest</span><br><span class="line">quay.io/bitnami/nginx:latest</span><br><span class="line">root@kite-virtual-machine:/home/kite/Desktop# docker images</span><br><span class="line">REPOSITORY              TAG       IMAGE ID       CREATED        SIZE</span><br><span class="line">quay.io/bitnami/nginx   latest    fef44885d7d3   15 hours ago   89.4MB</span><br><span class="line">nginx                   1.20.2    d6c9558ba445   2 weeks ago    141MB</span><br></pre></td></tr></table></figure>

<p>我們透過<code>docker image ls</code>看到的訊息是比較簡易的，如果要看完整詳細的docker訊息可以透過<code>docker image inspect [names] or [container id]</code></p>
<p>這個指定來看詳細內容，如下：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">docker image inspect d6c</span><br><span class="line">[</span><br><span class="line">    &#123;</span><br><span class="line">        #這項是鏡像完整的id</span><br><span class="line">        &quot;Id&quot;: &quot;sha256:d6c9558ba4456741fc4ee304e1a75a561e1c8d92f5107a715b6224bb7844f507&quot;,</span><br><span class="line">        &quot;RepoTags&quot;: [</span><br><span class="line">            &quot;nginx:1.20.2&quot;</span><br><span class="line">        ],</span><br><span class="line">        ... </span><br><span class="line">        #這項是鏡像的架構，比方說如果你是MAC 的M1晶片，可能就必須選用ARM架構，就選擇AMD64</span><br><span class="line">        &quot;Architecture&quot;: &quot;amd64&quot;,</span><br><span class="line">        #這項是鏡像的作業系統</span><br><span class="line">        &quot;Os&quot;: &quot;linux&quot;,</span><br><span class="line">        ...</span><br><span class="line">        &quot;RootFS&quot;: &#123;</span><br><span class="line">            &quot;Type&quot;: &quot;layers&quot;,</span><br><span class="line">        #之前有講到docker是有分層的概念，也就是對應到這個，後續再詳細說明</span><br><span class="line">            &quot;Layers&quot;: [</span><br><span class="line">                &quot;sha256:7d0ebbe3f5d26c1b5ec4d5dbb6fe3205d7061f9735080b0162d550530328abd6&quot;,</span><br><span class="line">                &quot;sha256:f7d96e665ae1a81d81e18e2503b2341bec8491606ffa6e2b48480a8e741dfab7&quot;,</span><br><span class="line">                &quot;sha256:a64a30dea1c4b926a45abed0728327d079d2c5fa4a7b7e6aa2d06136783a27a2&quot;,</span><br><span class="line">                &quot;sha256:dc78c3d0e91713e0b45a209df1509fb96d4f6a4f3099f4dfbc9e9ae71b143e43&quot;,</span><br><span class="line">                &quot;sha256:8fa2ccbce0c21c1a0140ce0f2db6b92f92c16f9ff00e4c8a1daaea548799b698&quot;,</span><br><span class="line">                &quot;sha256:b1073b41766d15d7835ea97e5eaf7f2f8a06b7fd1549ecbc2c9697813ede853a&quot;</span><br><span class="line">            ]</span><br><span class="line">        &#125;,</span><br><span class="line">        ...</span><br><span class="line">    &#125;</span><br><span class="line">]</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>簡單說明幾個部分：</p>
<ul>
<li>ID<ul>
<li>鏡像的完整ID</li>
</ul>
</li>
<li>Architecture<ul>
<li>鏡像的架構，比方說如果你是MAC 的M1晶片，可能就必須選用ARM架構，就選擇AMD64</li>
</ul>
</li>
<li>Os<ul>
<li>鏡像的作業系統</li>
</ul>
</li>
<li>Layers<ul>
<li>之前有講到docker是有分層的概念，也就是對應到這個，後續再詳細說明</li>
</ul>
</li>
</ul>
<p>鏡像檔的刪除注意事項</p>
<p>透過以下的例子，我們發現其實要移除鏡像檔必須這個鏡像在沒有被container引用，並且就算已經停止的container 也必須移除，才有辦法完成鏡像檔的刪除動作。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">1. 列出目前的鏡像清單</span></span><br><span class="line">root@kite-virtual-machine:/home/kite/Desktop# docker image ls</span><br><span class="line">REPOSITORY              TAG       IMAGE ID       CREATED        SIZE</span><br><span class="line">nginx                   latest    c316d5a335a5   2 weeks ago    142MB</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">2. 啟動nginx</span></span><br><span class="line">root@kite-virtual-machine:/home/kite/Desktop# docker container run -d nginx</span><br><span class="line">7dc905570d71599e9712f2dd978f25ef987d351f15b85231e79a8f5099bfda2b</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">3. 移除鏡像檔 發生錯誤</span></span><br><span class="line">root@kite-virtual-machine:/home/kite/Desktop# docker image rm c3</span><br><span class="line">Error response from daemon: conflict: unable to delete c316d5a335a5 (cannot be forced) - image is being used by running container 7dc905570d71</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">4. 停用container</span></span><br><span class="line">root@kite-virtual-machine:/home/kite/Desktop# docker container stop 7dc9</span><br><span class="line">7dc9</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">5. 再次移除鏡像檔 發生錯誤</span></span><br><span class="line">root@kite-virtual-machine:/home/kite/Desktop# docker image rm c3</span><br><span class="line">Error response from daemon: conflict: unable to delete c316d5a335a5 (must be forced) - image is being used by stopped container 7dc905570d71</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">6. 移除container</span></span><br><span class="line">root@kite-virtual-machine:/home/kite/Desktop# docker container rm 7dc9</span><br><span class="line">7dc9</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">7. 移除鏡像檔 完成</span></span><br><span class="line">root@kite-virtual-machine:/home/kite/Desktop# docker image rm c3</span><br><span class="line">Untagged: nginx:latest</span><br><span class="line">Untagged: nginx@sha256:2834dc507516af02784808c5f48b7cbe38b8ed5d0f4837f16e78d00deb7e7767</span><br><span class="line">Deleted: sha256:c316d5a335a5cf324b0dc83b3da82d7608724769f6454f6d9a621f3ec2534a5a</span><br><span class="line">Deleted: sha256:67e568696593c33b4a15c9d81dc6f67499b8d973b88eb49b53d47bf4dbf4d187</span><br><span class="line">Deleted: sha256:0f8d4e3d979c540644f248b4206cf540978166b095223bdc950628dca2e8f3f1</span><br><span class="line">Deleted: sha256:5d75bfe8a7422476a495b27c8a1598d1206137631d350b8bdee13bc88f365282</span><br><span class="line">Deleted: sha256:8284a9e28c625b2826efdd6160ea1ff7f710881a4a2afe1ef58a5eb51d3f919e</span><br><span class="line">Deleted: sha256:89a1db9e1079b7574c1a707bc8c1fe04ff723bc71d4bca8bc48653e9a32186d2</span><br><span class="line">Deleted: sha256:7d0ebbe3f5d26c1b5ec4d5dbb6fe3205d7061f9735080b0162d550530328abd6</span><br></pre></td></tr></table></figure>

<h3 id="3-1-image-output-和image-load"><a href="#3-1-image-output-和image-load" class="headerlink" title="3.1. image output 和image load"></a>3.1. image output 和image load</h3><p>匯出指令，其中 <code>-o</code> 是<code>output</code>的縮寫</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker image save quay.io/bitnami/nginx -o nginx.image</span><br></pre></td></tr></table></figure>

<p>匯入指令，其中 <code>-i</code>是 <code>input</code>的縮寫</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker image load -i ./nginx.image </span><br></pre></td></tr></table></figure>

<h2 id="4-鏡像的導出和導入-offline"><a href="#4-鏡像的導出和導入-offline" class="headerlink" title="4. 鏡像的導出和導入(offline)"></a>4. 鏡像的導出和導入(offline)</h2><p>小實驗，動手下指令玩玩看，如下：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">匯出鏡像檔</span></span><br><span class="line">root@kite-virtual-machine:/home/kite/Desktop# docker image save quay.io/bitnami/nginx -o nginx.image</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">查看當前路徑是否有剛剛匯出的鏡像</span></span><br><span class="line">root@kite-virtual-machine:/home/kite/Desktop# ll</span><br><span class="line">total 91340</span><br><span class="line">drwxr-xr-x  2 kite kite     4096  二  16 15:27 ./</span><br><span class="line">drwxr-xr-x 23 kite kite     4096  二  11 09:44 ../</span><br><span class="line">-rw-------  1 root root 93520384  二  16 15:27 nginx.image</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">先刪除鏡像，為了後面測試load指定</span></span><br><span class="line">root@kite-virtual-machine:/home/kite/Desktop# docker image rm quay.io/bitnami/nginx</span><br><span class="line">Untagged: quay.io/bitnami/nginx:latest</span><br><span class="line">Untagged: quay.io/bitnami/nginx@sha256:f9b149213fa98cee7750ede87bbec1109971c7a2cfa556c89b7d2cbf3697b213</span><br><span class="line">Deleted: sha256:fef44885d7d30571af3156ceaf232702d5b8f6771cda3ed724f8cc272e9c9829</span><br><span class="line">Deleted: sha256:a189c52fed386394dbb7ffb51c5c462ad2ba77c26c01d5c01e72b15e40db29c0</span><br><span class="line">Deleted: sha256:2f1c8bd99f51d77b4323230921f2ca86706e353cf2d775cf0b002e0e479f79e6</span><br><span class="line">Deleted: sha256:5c2ae43f5fa2f4dacbf202f3a363c3320eba7f78806e059bb0f893b925c46f53</span><br><span class="line">Deleted: sha256:0a946840cdb0258bf1b59a31680050dd60085769b79f3b44d7aa17ec069424f6</span><br><span class="line">Deleted: sha256:c5693486bf8d9e4a52a4925ff9f0c37861c3bb7646484f424b9a6b04b1b0eaf3</span><br><span class="line">Deleted: sha256:9efb4fc4677072eb2a7d83a8cf75aff78e35599aed05d4177b02bc557f878832</span><br><span class="line">Deleted: sha256:342797d9b97f8ca828cd8c7fc8081497627a0c249f1a808f7df8f66de8c48969</span><br><span class="line">Deleted: sha256:2b660bfea22ebf12cf21e46a323d73c68ef0094fc327d8ff1f7b9c5e6c8540e5</span><br><span class="line">Deleted: sha256:00251eb08c244921e37ee3e3f0e7b1f03d1f0d465f88c268372e6b1bbd3a29ad</span><br><span class="line">Deleted: sha256:305bbe3d88ac18f896068c246f07787570634b63bfbd47a2b9d65329b7d25558</span><br><span class="line">Deleted: sha256:a0fc422098a3de3df394bfcb3e085abd4fe28f58ef8b1d8f5a273529fbf5e65d</span><br><span class="line">Deleted: sha256:ae58f1561944087b459d2688dff7eda143f4d7512f05bf2b52f134fdfd2b8cd4</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">加載剛output的鏡像</span></span><br><span class="line">root@kite-virtual-machine:/home/kite/Desktop# docker image load -i ./nginx.image </span><br><span class="line">ae58f1561944: Loading layer [==================================================&gt;]   70.8MB/70.8MB</span><br><span class="line">2f6f61f3bbc9: Loading layer [==================================================&gt;]  81.92kB/81.92kB</span><br><span class="line">3bfda742b4b4: Loading layer [==================================================&gt;]  15.14MB/15.14MB</span><br><span class="line">6ed2fe854cdb: Loading layer [==================================================&gt;]  2.634MB/2.634MB</span><br><span class="line">dddc1a8d1029: Loading layer [==================================================&gt;]  2.374MB/2.374MB</span><br><span class="line">269fbc668e52: Loading layer [==================================================&gt;]  2.307MB/2.307MB</span><br><span class="line">c12665b38039: Loading layer [==================================================&gt;]  5.632kB/5.632kB</span><br><span class="line">52f2403acee0: Loading layer [==================================================&gt;]  2.048kB/2.048kB</span><br><span class="line">260212c608b3: Loading layer [==================================================&gt;]  3.584kB/3.584kB</span><br><span class="line">0eca2613dc76: Loading layer [==================================================&gt;]  3.584kB/3.584kB</span><br><span class="line">29a9d19d38b2: Loading layer [==================================================&gt;]  60.42kB/60.42kB</span><br><span class="line">da0a9db5694c: Loading layer [==================================================&gt;]  60.93kB/60.93kB</span><br><span class="line">Loaded image: quay.io/bitnami/nginx:latest</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">查看目前鏡像清單，成功的匯入囉</span></span><br><span class="line">root@kite-virtual-machine:/home/kite/Desktop# docker images</span><br><span class="line">REPOSITORY              TAG       IMAGE ID       CREATED        SIZE</span><br><span class="line">quay.io/bitnami/nginx   latest    fef44885d7d3   16 hours ago   89.4MB</span><br></pre></td></tr></table></figure>

<h2 id="5-Dockerfile介紹"><a href="#5-Dockerfile介紹" class="headerlink" title="5. Dockerfile介紹"></a>5. Dockerfile介紹</h2><p>官網的dockerfile 說明</p>
<blockquote>
<p>Docker can build images automatically by reading the instructions from a <code>Dockerfile</code>. A Dockerfile is a <code>text</code> document that contains all the commands a user could call on the command line to assemble an image. Using docker build users can create an automated build that executes several command-line instructions in succession.</p>
</blockquote>
<ul>
<li>Dockerfile 是用於構建於docker鏡像的文件<ul>
<li>也可以說是一個構建的腳本</li>
</ul>
</li>
<li>Dockerfile 裡面包含了構建鏡像所需的”指令”</li>
<li>Dockerfile有其特定的語法規則</li>
</ul>
<h2 id="6-鏡像構建準備"><a href="#6-鏡像構建準備" class="headerlink" title="6. 鏡像構建準備"></a>6. 鏡像構建準備</h2><h3 id="6-1-舉例：執行一個python程式"><a href="#6-1-舉例：執行一個python程式" class="headerlink" title="6.1. 舉例：執行一個python程式"></a>6.1. 舉例：執行一個python程式</h3><p>假如我們要在一台ubuntu21.04上運行下面這個hello.py的python腳本</p>
<h4 id="6-1-1-python腳本"><a href="#6-1-1-python腳本" class="headerlink" title="6.1.1. python腳本"></a>6.1.1. python腳本</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&quot;hello docker,I&#x27;m kite&quot;</span>)</span><br></pre></td></tr></table></figure>

<p>所以我們這個環境需要兩樣東西<code>ubuntu21.04</code>、<code>python</code>，並且執行<code>python3 hello.py</code>腳本。</p>
<h4 id="6-1-2-具體Dockerfile結構"><a href="#6-1-2-具體Dockerfile結構" class="headerlink" title="6.1.2. 具體Dockerfile結構"></a>6.1.2. 具體Dockerfile結構</h4><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">FROM</span> ubuntu:<span class="number">21.04</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> apt-get update &amp;&amp; \</span></span><br><span class="line"><span class="language-bash">    DEBIAN_FRONTEND=noninteractive apt-get install --no-install-recommends -y python3.9 python3-pip python3.9-dev</span></span><br><span class="line"><span class="keyword">ADD</span><span class="language-bash"> hello.py /</span></span><br><span class="line"><span class="keyword">CMD</span><span class="language-bash"> [<span class="string">&quot;python3&quot;</span>, <span class="string">&quot;/hello.py&quot;</span>]</span></span><br></pre></td></tr></table></figure>

<p><code>FROM</code>：抓一個我們需要的<code>ubuntu版本</code></p>
<p><code>RUN</code>：下指令安裝python</p>
<p><code>ADD</code>：加入hello.py 腳本至鏡像內的根目錄</p>
<p><code>CMD</code>：以python3 方式執行 路徑<code>/hello.py</code>程式</p>
<h4 id="6-1-3-執行流程"><a href="#6-1-3-執行流程" class="headerlink" title="6.1.3. 執行流程"></a>6.1.3. 執行流程</h4><ol>
<li><p>建立目錄</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir genDockerImagesFolder</span><br></pre></td></tr></table></figure>
</li>
<li><p>進入目錄</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd genDockerImagesFolder/</span><br></pre></td></tr></table></figure>
</li>
<li><p>建立hello.py檔</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo &quot;print(&#x27;hello,docker&#x27;)&quot; &gt; hello.py</span><br></pre></td></tr></table></figure>
</li>
<li><p>建立Dockerfile檔</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">cat &lt;&lt;EOT &gt;&gt; Dockerfile</span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">FROM ubuntu:21.04</span></span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">RUN apt-get update &amp;&amp; \</span></span><br><span class="line"><span class="language-bash">&gt;     DEBIAN_FRONTEND=noninteractive apt-get install --no-install-recommends -y python3.9 python3-pip python3.9-dev</span></span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">ADD hello.py /</span></span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">CMD [<span class="string">&quot;python3&quot;</span>, <span class="string">&quot;/hello.py&quot;</span>]</span></span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">EOT</span></span><br></pre></td></tr></table></figure>

<p>說明：在build image檔時，必須在資料夾內有<code>Dockerfile</code>檔案，後續下build指令才會成功</p>
</li>
<li><p>確認資料夾檔案</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ll</span><br></pre></td></tr></table></figure>
</li>
<li><p>build 鏡像檔</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">指令格式</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">docker image build -t [imagename] [path]</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">預設是lastest</span></span><br><span class="line">docker image build -t hello .</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">給tag</span></span><br><span class="line">docker image build -t hello:1.0 .</span><br></pre></td></tr></table></figure>

<p>說明：</p>
<p><code>-t</code>：指的是tag</p>
<p><code>imagename</code>：hello</p>
<p><code>path</code>：<code>.</code>(當前路徑)</p>
</li>
</ol>
<p>具體語法說明可以參考<a target="_blank" rel="noopener" href="https://docs.docker.com/engine/reference/builder/">Dockerfile reference</a>，以下是練習建image的指令過程：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">建立目錄</span></span><br><span class="line">root@kite-virtual-machine:/home/kite/Desktop# mkdir genDockerImagesFolder</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">進入目錄</span></span><br><span class="line">root@kite-virtual-machine:/home/kite/Desktop# cd genDockerImagesFolder/</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">建立hello.py檔</span></span><br><span class="line">root@kite-virtual-machine:/home/kite/Desktop/genDockerImagesFolder# echo &quot;print(&#x27;hello,docker&#x27;)&quot; &gt; hello.py</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">建立Dockerfile檔</span></span><br><span class="line">root@kite-virtual-machine:/home/kite/Desktop/genDockerImagesFolder# cat &lt;&lt;EOT &gt;&gt; Dockerfile</span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">FROM ubuntu:21.04</span></span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">RUN apt-get update &amp;&amp; \</span></span><br><span class="line"><span class="language-bash">&gt;     DEBIAN_FRONTEND=noninteractive apt-get install --no-install-recommends -y python3.9 python3-pip python3.9-dev</span></span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">ADD hello.py /</span></span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">CMD [<span class="string">&quot;python3&quot;</span>, <span class="string">&quot;/hello.py&quot;</span>]</span></span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">EOT</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">確認資料夾檔案</span></span><br><span class="line">root@kite-virtual-machine:/home/kite/Desktop/genDockerImagesFolder# ll</span><br><span class="line">total 16</span><br><span class="line">drwxr-xr-x 2 root root 4096  二  17 11:58 ./</span><br><span class="line">drwxr-xr-x 3 kite kite 4096  二  17 11:50 ../</span><br><span class="line">-rw-r--r-- 1 root root  198  二  17 11:58 Dockerfile</span><br><span class="line">-rw-r--r-- 1 root root   22  二  17 11:51 hello.py</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">build 鏡像檔</span></span><br><span class="line">root@kite-virtual-machine:/home/kite/Desktop/genDockerImagesFolder# docker image build -t hello .</span><br><span class="line"></span><br><span class="line">Step 1/4 : FROM ubuntu:21.04</span><br><span class="line"><span class="meta prompt_"> ---&gt; </span><span class="language-bash">7cc39f89fa58</span></span><br><span class="line">Step 2/4 : RUN apt-get update &amp;&amp;     DEBIAN_FRONTEND=noninteractive apt-get install --no-install-recommends -y python3.9 </span><br><span class="line">...</span><br><span class="line">...</span><br><span class="line">...</span><br><span class="line">Step 3/4 : ADD hello.py /</span><br><span class="line"><span class="meta prompt_"> ---&gt; </span><span class="language-bash">864392501c61</span></span><br><span class="line">Step 4/4 : CMD [&quot;python3&quot;, &quot;/hello.py&quot;]</span><br><span class="line"><span class="meta prompt_"> ---&gt; </span><span class="language-bash">Running <span class="keyword">in</span> 6ddb6041461e</span></span><br><span class="line">Removing intermediate container 6ddb6041461e</span><br><span class="line"><span class="meta prompt_"> ---&gt; </span><span class="language-bash">698fa0b38d79</span></span><br><span class="line">Successfully built 698fa0b38d79</span><br><span class="line">Successfully tagged hello:latest</span><br></pre></td></tr></table></figure>

<p>build 的過程需要一些時間，等到我們看到suceccfully之後，代表已經完成了，接著檢查看看下指令<code>docker images</code></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">root@kite-virtual-machine:/home/kite/Desktop/genDockerImagesFolder# docker images</span><br><span class="line">REPOSITORY              TAG       IMAGE ID       CREATED          SIZE</span><br><span class="line">hello                   latest    698fa0b38d79   15 minutes ago   206MB</span><br></pre></td></tr></table></figure>

<p>hello 鏡像檔就出現在清單中囉，如果要導出鏡像記得再看前面的部分進行操作即可。</p>
<p>試著用<code>it</code> 交互的相方運行hello 容器如下：&#96;</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">root@kite-virtual-machine:/home/kite/Desktop/genDockerImagesFolder# docker run -it hello</span><br><span class="line">hello,docker</span><br></pre></td></tr></table></figure>

<h2 id="7-鏡像分享"><a href="#7-鏡像分享" class="headerlink" title="7. 鏡像分享"></a>7. 鏡像分享</h2><ol>
<li><p>先註冊一個<code>Dockerhub</code>帳號</p>
</li>
<li><p>因為先前建立的鏡像沒有加上用戶名，所以可以通過以下兩個方式做準備</p>
</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">重新build一個並加入<span class="built_in">id</span></span></span><br><span class="line">docker image build -t kitefree/hello .</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">針對既有的hello鏡像 複製並新增一個</span></span><br><span class="line">docker image tag hello kitefree/hello:1.0</span><br></pre></td></tr></table></figure>

<p>執行登入指令</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker login</span><br></pre></td></tr></table></figure>

<p>登出為</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker logout</span><br></pre></td></tr></table></figure>

<p>會要求輸入帳號密碼，登入完成後進行布署</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker image push kitefree/hello:1.0</span><br></pre></td></tr></table></figure>

<p>過程如下</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">root@kite-virtual-machine:/home/kite/Desktop/genDockerImagesFolder# docker login</span><br><span class="line">Login with your Docker ID to push and pull images from Docker Hub. If you don&#x27;t have a Docker ID, head over to https://hub.docker.com to create one.</span><br><span class="line">Username: kitefree</span><br><span class="line">Password: </span><br><span class="line">WARNING! Your password will be stored unencrypted in /root/.docker/config.json.</span><br><span class="line">Configure a credential helper to remove this warning. See</span><br><span class="line">https://docs.docker.com/engine/reference/commandline/login/#credentials-store</span><br><span class="line"></span><br><span class="line">Login Succeeded</span><br><span class="line">root@kite-virtual-machine:/home/kite/Desktop/genDockerImagesFolder# docker image push kitefree/hello:1.0</span><br><span class="line">The push refers to repository [docker.io/kitefree/hello]</span><br><span class="line">3948f6982f11: Pushed </span><br><span class="line">24ac8aef82f9: Pushed </span><br><span class="line">dca6a631e9bb: Mounted from library/ubuntu </span><br><span class="line">1.0: digest: sha256:8f7be9cd060a67593a089a4111b8c5a3127e324c49aeed0843f578a100eba2b6 size: 948</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>接著登入後台查看一下結果</p>
<p><img src="https://i.imgur.com/U7yXbV0.png" alt="image-20220218091548874"></p>
<p><img src="https://i.imgur.com/5a0sZqq.png" alt="image-20220218091724911"></p>
<p>我們試著pull鏡像檔下來，我們先把本地端的鏡像檔刪除。</p>
<p>拉取鏡像語法</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull kitefree/hello:1.0</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">刪除本地鏡像</span></span><br><span class="line">root@kite-virtual-machine:/home/kite/Desktop/genDockerImagesFolder# docker image rm kitefree/hello:1.0</span><br><span class="line">Untagged: kitefree/hello:1.0</span><br><span class="line">Untagged: kitefree/hello@sha256:8f7be9cd060a67593a089a4111b8c5a3127e324c49aeed0843f578a100eba2b6</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">拉取鏡像</span></span><br><span class="line">root@kite-virtual-machine:/home/kite/Desktop/genDockerImagesFolder# docker pull kitefree/hello:1.0</span><br><span class="line">1.0: Pulling from kitefree/hello</span><br><span class="line">Digest: sha256:8f7be9cd060a67593a089a4111b8c5a3127e324c49aeed0843f578a100eba2b6</span><br><span class="line">Status: Downloaded newer image for kitefree/hello:1.0</span><br><span class="line">docker.io/kitefree/hello:1.0</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">檢查本地鏡像</span></span><br><span class="line">root@kite-virtual-machine:/home/kite/Desktop/genDockerImagesFolder# docker images</span><br><span class="line">REPOSITORY              TAG       IMAGE ID       CREATED        SIZE</span><br><span class="line">kitefree/hello          1.0       698fa0b38d79   17 hours ago   206MB</span><br></pre></td></tr></table></figure>

<h2 id="8-通過commit創建鏡像"><a href="#8-通過commit創建鏡像" class="headerlink" title="8. 通過commit創建鏡像"></a>8. 通過commit創建鏡像</h2><p>我們目標是進入容器內部直接修改文件，停用再啟用容器，我們會發現改的東西已經成功寫入到容器內部了。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">啟動一個nginx容器</span></span><br><span class="line">root@kite-virtual-machine:/home/kite/Desktop# docker run -d -p 8000:80 --name nginx01 nginx</span><br><span class="line">5544cc14e2af3ed16dc875a9bb9b3594066bc695f94272ce6f6794f4a66714a7</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">進入容器內部</span></span><br><span class="line">root@kite-virtual-machine:/home/kite/Desktop# docker exec -it 554 sh</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">修改首頁文字</span></span><br><span class="line">echo &quot;hello,docker&quot; &gt; /usr/share/nginx/html/index.html</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">離開容器</span></span><br><span class="line">exit</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">停止容器</span></span><br><span class="line">root@kite-virtual-machine:/home/kite/Desktop# docker container stop 554</span><br><span class="line">554     </span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">啟用容器</span></span><br><span class="line">root@kite-virtual-machine:/home/kite/Desktop# docker container start 554</span><br><span class="line">554</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">查看容器異動的差異</span></span><br><span class="line">root@kite-virtual-machine:/home/kite/Desktop# docker diff nginx01</span><br><span class="line">C /var</span><br><span class="line">C /var/cache</span><br><span class="line">C /var/cache/nginx</span><br><span class="line">A /var/cache/nginx/fastcgi_temp</span><br><span class="line">A /var/cache/nginx/proxy_temp</span><br><span class="line">A /var/cache/nginx/scgi_temp</span><br><span class="line">A /var/cache/nginx/uwsgi_temp</span><br><span class="line">A /var/cache/nginx/client_temp</span><br><span class="line">C /usr</span><br><span class="line">C /usr/share</span><br><span class="line">C /usr/share/nginx</span><br><span class="line">C /usr/share/nginx/html</span><br><span class="line">C /usr/share/nginx/html/index.html</span><br><span class="line">C /run</span><br><span class="line">A /run/nginx.pid</span><br><span class="line">C /etc</span><br><span class="line">C /etc/nginx</span><br><span class="line">C /etc/nginx/conf.d</span><br><span class="line">C /etc/nginx/conf.d/default.conf</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>以瀏覽器去查看webserver 的確在啟動後是有修改還是有效的。</p>
<p><img src="https://i.imgur.com/AuJjhzo.png" alt="image-20220218102300209"></p>
<p>接著，我們來玩玩看用commit 指令創建一個鏡像</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">指定容器<span class="built_in">id</span> 554 進行commit 並創建名為 kitefree/nginx 儲存庫</span></span><br><span class="line">root@kite-virtual-machine:/home/kite/Desktop# docker commit 554 kitefree/nginx</span><br><span class="line">sha256:799b17a2576601b6db1431f9d5b901843470ad9180e9c99aa86c0d1a7aef4569</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">查看目前鏡像清單</span></span><br><span class="line">root@kite-virtual-machine:/home/kite/Desktop# docker images</span><br><span class="line">REPOSITORY              TAG       IMAGE ID       CREATED         SIZE</span><br><span class="line">kitefree/nginx          latest    799b17a25766   8 seconds ago   142MB</span><br><span class="line">nginx                   latest    c316d5a335a5   3 weeks ago     142MB</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">啟動容器 並給port 8001</span> </span><br><span class="line">root@kite-virtual-machine:/home/kite/Desktop# docker run -d -p 8001:80 --name kite_nginx kitefree/nginx </span><br><span class="line">4416889d90c4dc29292cbbe3cc35184d240d491975a2367c800651329ddc5627</span><br></pre></td></tr></table></figure>

<p>在以瀏覽器方式查看，我們會看到一樣為<code>hello,docker</code>的網頁顯示訊息。</p>
<h2 id="9-聊聊scratch鏡像"><a href="#9-聊聊scratch鏡像" class="headerlink" title="9. 聊聊scratch鏡像"></a>9. 聊聊scratch鏡像</h2><p>是一個empty image ，無法通過docker pull 拉取鏡像，但是可以<code>FROM scratch</code> 構建鏡像。在工作上比較少用到scratch鏡像，所以簡單的玩一下</p>
<p>以下為測試的執行過程</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">建立一個c語言的程式碼</span></span><br><span class="line">root@kite-virtual-machine:/home/kite/Desktop/genDockerImagesFolder# cat &lt;&lt;EOT &gt;&gt;hello.c</span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash"><span class="comment">#include&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash">&gt; int main()</span></span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">&#123;</span></span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">    <span class="built_in">printf</span>(<span class="string">&quot;hello docker\n&quot;</span>);</span></span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">&#125;</span></span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">EOT</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">執行編譯產出hello檔</span></span><br><span class="line">root@kite-virtual-machine:/home/kite/Desktop/genDockerImagesFolder# gcc --static -o hello hello.c</span><br><span class="line">root@kite-virtual-machine:/home/kite/Desktop/genDockerImagesFolder# ls</span><br><span class="line">Dockerfile  hello  hello.c  hello.py</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">測試執行是否正常輸入字串</span></span><br><span class="line">root@kite-virtual-machine:/home/kite/Desktop/genDockerImagesFolder# ./hello</span><br><span class="line">hello docker</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">建立dockerfile檔案</span></span><br><span class="line">root@kite-virtual-machine:/home/kite/Desktop/genDockerImagesFolder# cat &lt;&lt;EOT &gt;&gt;Dockerfile</span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">FROM scratch</span></span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">ADD hello /</span></span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">CMD [<span class="string">&quot;/hello&quot;</span>]</span></span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">EOT</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">構建鏡像檔</span></span><br><span class="line">root@kite-virtual-machine:/home/kite/Desktop/genDockerImagesFolder# docker build -t kitefree/scratch .</span><br><span class="line">Sending build context to Docker daemon  876.5kB</span><br><span class="line">Step 1/3 : FROM scratch</span><br><span class="line"><span class="meta prompt_"> ---&gt; </span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash">Step 2/3 : ADD hello /</span></span><br><span class="line"><span class="meta prompt_"> ---&gt; </span><span class="language-bash">f95110c6fba2</span></span><br><span class="line">Step 3/3 : CMD [&quot;/hello&quot;]</span><br><span class="line"><span class="meta prompt_"> ---&gt; </span><span class="language-bash">Running <span class="keyword">in</span> 3a60c6a60ed1</span></span><br><span class="line">Removing intermediate container 3a60c6a60ed1</span><br><span class="line"><span class="meta prompt_"> ---&gt; </span><span class="language-bash">f39f26ad08a6</span></span><br><span class="line">Successfully built f39f26ad08a6</span><br><span class="line">Successfully tagged kitefree/scratch:latest</span><br><span class="line">root@kite-virtual-machine:/home/kite/Desktop/genDockerImagesFolder# docker images</span><br><span class="line">REPOSITORY              TAG       IMAGE ID       CREATED             SIZE</span><br><span class="line">kitefree/scratch        latest    f39f26ad08a6   7 seconds ago       872kB</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">啟動容器執行 ，這邊多加了<span class="built_in">rm</span>參數是指執行完後會自動刪除容器</span></span><br><span class="line">root@kite-virtual-machine:/home/kite/Desktop/genDockerImagesFolder# docker run -it --rm kitefree/scratch </span><br><span class="line">hello docker</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="10-拉取次數的計算"><a href="#10-拉取次數的計算" class="headerlink" title="10. 拉取次數的計算"></a>10. 拉取次數的計算</h2><p>如果是以匿名方式拉取，會以IP方式計算</p>
<p>如果是以帳號登入方式拉取，那計算方式就會計算在帳號上面。當在公司同一個網段時，如果都用帳號的部分去進行拉取，基本上比較不用擔心有次數上的問題。</p>
<p>拉取次數目前的使用狀況可以透過curl request 指令進行查詢</p>

    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/docker/" rel="tag"># docker</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2022/02/15/2022-02-14%20Docker%20%E7%B3%BB%E5%88%97%20-%20(1)%20%E5%AE%B9%E5%99%A8%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/" rel="prev" title="docker 系列 - (1) 容器快速上手">
      <i class="fa fa-chevron-left"></i> docker 系列 - (1) 容器快速上手
    </a></div>
      <div class="post-nav-item">
    <a href="/2022/02/22/2022-02-22%20Docker%20%E7%B3%BB%E5%88%97%20-%20(3)%20Dockerfile%E5%AE%8C%E5%85%A8%E6%8C%87%E5%8D%97/" rel="next" title="docker 系列 - (3) Dockerfile完全指南">
      docker 系列 - (3) Dockerfile完全指南 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目錄
        </li>
        <li class="sidebar-nav-overview">
          本站概要
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-%E9%8F%A1%E5%83%8F%E7%9A%84%E7%8D%B2%E5%8F%96%E6%96%B9%E5%BC%8F"><span class="nav-text">1. 鏡像的獲取方式</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-%E9%8F%A1%E5%83%8F%E7%9A%84registry%E4%BB%8B%E7%B4%B9"><span class="nav-text">2. 鏡像的registry介紹</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-%E9%8F%A1%E5%83%8F%E7%9A%84%E7%8D%B2%E5%8F%96%E5%92%8C%E6%9F%A5%E7%9C%8B"><span class="nav-text">3. 鏡像的獲取和查看</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#3-1-image-output-%E5%92%8Cimage-load"><span class="nav-text">3.1. image output 和image load</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-%E9%8F%A1%E5%83%8F%E7%9A%84%E5%B0%8E%E5%87%BA%E5%92%8C%E5%B0%8E%E5%85%A5-offline"><span class="nav-text">4. 鏡像的導出和導入(offline)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-Dockerfile%E4%BB%8B%E7%B4%B9"><span class="nav-text">5. Dockerfile介紹</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-%E9%8F%A1%E5%83%8F%E6%A7%8B%E5%BB%BA%E6%BA%96%E5%82%99"><span class="nav-text">6. 鏡像構建準備</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#6-1-%E8%88%89%E4%BE%8B%EF%BC%9A%E5%9F%B7%E8%A1%8C%E4%B8%80%E5%80%8Bpython%E7%A8%8B%E5%BC%8F"><span class="nav-text">6.1. 舉例：執行一個python程式</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#6-1-1-python%E8%85%B3%E6%9C%AC"><span class="nav-text">6.1.1. python腳本</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#6-1-2-%E5%85%B7%E9%AB%94Dockerfile%E7%B5%90%E6%A7%8B"><span class="nav-text">6.1.2. 具體Dockerfile結構</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#6-1-3-%E5%9F%B7%E8%A1%8C%E6%B5%81%E7%A8%8B"><span class="nav-text">6.1.3. 執行流程</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#7-%E9%8F%A1%E5%83%8F%E5%88%86%E4%BA%AB"><span class="nav-text">7. 鏡像分享</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#8-%E9%80%9A%E9%81%8Ecommit%E5%89%B5%E5%BB%BA%E9%8F%A1%E5%83%8F"><span class="nav-text">8. 通過commit創建鏡像</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#9-%E8%81%8A%E8%81%8Ascratch%E9%8F%A1%E5%83%8F"><span class="nav-text">9. 聊聊scratch鏡像</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#10-%E6%8B%89%E5%8F%96%E6%AC%A1%E6%95%B8%E7%9A%84%E8%A8%88%E7%AE%97"><span class="nav-text">10. 拉取次數的計算</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">kite</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">129</span>
          <span class="site-state-item-name">文章</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">66</span>
        <span class="site-state-item-name">分類</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">115</span>
        <span class="site-state-item-name">標籤</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">kite</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-area"></i>
    </span>
    <span title="總字數">414k</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="所需總閱讀時間">12:32</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> 強力驅動
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

</body>
</html>
